<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Class | Control Center</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="container main-container">
        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page active">
            <!-- Header -->
            <header class="header">
                <div class="header-main">
                    <div class="brand">
                        <div class="logo-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="brand-text">
                            <h1>Smart class</h1>
                            <span class="location-tag"><i class="fas fa-map-marker-alt"></i> Main Building</span>
                        </div>
                    </div>

                    <div class="header-actions">
                        <div class="user-pill">
                            <span class="user-label">ADMIN</span>
                            <div class="status-dot"></div>
                        </div>
                        <button id="refreshBtn" class="refresh-action-btn glass">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Master Controls -->
            <section class="master-controls">
                <div class="master-grid">
                    <button id="lightsOnBtn" class="master-btn on-btn glass">
                        <i class="fas fa-lightbulb"></i> <span>Lights ON</span>
                    </button>
                    <button id="lightsOffBtn" class="master-btn off-btn glass">
                        <i class="far fa-lightbulb"></i> <span>Lights OFF</span>
                    </button>
                    <button id="fansOnBtn" class="master-btn on-btn glass">
                        <i class="fas fa-fan"></i> <span>Fans ON</span>
                    </button>
                    <button id="fansOffBtn" class="master-btn off-btn glass">
                        <i class="fas fa-power-off"></i> <span>Fans OFF</span>
                    </button>
                </div>
            </section>

            <!-- Relay Grid -->
            <main class="main-content-area">
                <div id="relayGrid" class="relay-grid">
                    <!-- Relay cards injected here -->
                </div>
            </main>
        </div>

        <!-- Schedules Page -->
        <div id="schedulePage" class="page">
            <header class="header">
                <div class="header-main">
                    <h1>Schedules</h1>
                    <button id="addScheduleBtn" class="add-circle-btn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </header>

            <div id="schedulesList" class="schedules-list">
                <!-- Schedule cards injected here -->
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="page">
            <header class="header">
                <div class="header-main">
                    <h1>Settings</h1>
                </div>
            </header>
            <div class="settings-content" style="margin-top: 20px;">
                <div class="relay-card"
                    style="width: 100%; border-radius: 20px; text-align: center; color: var(--text-muted);">
                    <p>System v2.2.0 â€¢ Admin Panel</p>
                    <p style="font-size: 0.8rem; margin-top: 10px;">Last Sync: <span id="lastUpdateDisplay">--</span>
                    </p>
                    <div style="margin-top: 20px;">
                        <a href="{{ url_for('logout') }}" class="btn btn-secondary glass" style="width: 100%;">
                            <i class="fas fa-sign-out-alt"></i> Log Out
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Notification -->
        <div id="statusBar" class="status-bar"></div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="dashboard">
            <i class="fas fa-th-large"></i>
            <span>DASHBOARD</span>
        </div>
        <div class="nav-item" data-page="schedule">
            <i class="fas fa-clock"></i>
            <span>SCHEDULE</span>
        </div>
        <div class="nav-item" data-page="settings">
            <i class="fas fa-cog"></i>
            <span>SETTINGS</span>
        </div>
    </nav>

    <!-- New Schedule Modal -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">New Schedule</h2>
                <i class="fas fa-times close-modal" id="closeModal"></i>
            </div>

            <form id="scheduleForm">
                <div class="form-group" style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 600;">Schedule
                        Name</label>
                    <input type="text" id="schedName" placeholder="e.g. Morning Lights"
                        style="width: 100%; height: 48px; border-radius: 12px; border: 1px solid var(--card-border); background: rgba(0,0,0,0.2); color: white; padding: 0 16px;"
                        required>
                </div>

                <div class="form-group" style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 600;">Target
                        Channels</label>
                    <div id="channelToggleGrid" class="toggle-grid">
                        <div class="toggle-item" data-ch="1">CH1</div>
                        <div class="toggle-item" data-ch="2">CH2</div>
                        <div class="toggle-item" data-ch="3">CH3</div>
                        <div class="toggle-item" data-ch="4">CH4</div>
                        <div class="toggle-item" data-ch="5">CH5</div>
                        <div class="toggle-item" data-ch="6">CH6</div>
                        <div class="toggle-item" data-ch="7">CH7</div>
                        <div class="toggle-item" data-ch="8">CH8</div>
                    </div>
                </div>

                <div class="form-group" style="margin-bottom: 20px;">
                    <label
                        style="display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 600;">Action</label>
                    <div class="action-selector">
                        <div class="action-option active" data-action="on">
                            <i class="fas fa-toggle-on"></i>
                            <span>Turn ON</span>
                        </div>
                        <div class="action-option" data-action="off">
                            <i class="fas fa-toggle-off"></i>
                            <span>Turn OFF</span>
                        </div>
                    </div>
                    <input type="hidden" id="schedAction" value="on">
                </div>

                <div class="form-group" style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 600;">Time</label>
                    <input type="time" id="schedTime" required>
                </div>

                <div class="form-group" style="margin-bottom: 30px;">
                    <label style="display: block; margin-bottom: 8px; font-size: 0.8rem; font-weight: 600;">Repeat
                        Days</label>
                    <div class="day-toggle-row">
                        <div class="day-circle" data-day="Mon">M</div>
                        <div class="day-circle" data-day="Tue">T</div>
                        <div class="day-circle" data-day="Wed">W</div>
                        <div class="day-circle" data-day="Thu">T</div>
                        <div class="day-circle" data-day="Fri">F</div>
                        <div class="day-circle" data-day="Sat">S</div>
                        <div class="day-circle" data-day="Sun">S</div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary"
                    style="width: 100%; height: 56px; border-radius: 16px; font-weight: 700;">Save Schedule</button>
            </form>
        </div>
    </div>

    <!-- Application Logic -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>